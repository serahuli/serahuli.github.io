---
title: WEB前端安全防御
top: false
cover: false
toc: true
mathjax: true
date: 2020-11-10 18:48:13
password:
summary:
tags: '前端安全'
categories:
---

> - XSS 攻击：跨站脚本攻击，主要使用 javascript 向网站注入代码，实现盗号、窃取资料的目的。
> - csrf攻击：跨站伪造请求，冒充用户进行一些操作，甚至完成银行的转账
> - sql注入：直接攻击系统的数据库，可以实现数据库级别的操作，盗取数据
> - 文件上传漏洞：上传自定义的 php 代码并执行。==》一般发生在windows

## XSS攻击

XSS是互联网使用最广泛的攻击手段之一

=== 经常用来做网络钓鱼攻击

**危害：**

- 盗取各类账户，比如银行账号，管理员账号
- 控制企业数据，对企业敏感数据增删改查
- 非法转账（非法账户或者要转的钱）
- 控制受害者机器向其它网站发起攻击

**XSS攻击方式**

- 存储型攻击

  > XSS代码被插入到类似个人信息或发表的文章等存储在服务器上的信息中，即XSS代码被持久化。

- 反射型攻击

  > 非持久化，代码隐藏在链接中，欺骗用户自己去点击链接时触发XSS代码，一般出现在搜索页面。

1. 屏蔽了 <script>, onclick, href等属性
2. 屏蔽 javascript
3. 屏蔽 引号混用
4. 屏蔽 innerHTML

**XSS攻击防范**

- 过滤: 对提交内容的非法标签与属性进行过滤（如： script、onclick）（kses库过滤器库---》提供了一个白名单，只有白名单可以通过）

- 转义: 通过使用htmlspecialchars等函数，将提交内容中的字符 < 和 > 转换成 HTML实体。

  

| 字符 | 转义字符 |
| ---- | -------- |
| &    | `&amp;`  |
| "    | `&quot;` |
| '    | `&#039;` |
| <    | `&lt;`   |
| >    | `&gt;`   |

## CSRF攻击

- get 型攻击：模拟get请求（同源，为了方便携带 cookie）,向目标网站发起请求
- post 型攻击: 模拟post请求（同源）,发起表单请求，从而达到攻击的目的

**防范**

- referer防范：通过判断请求头中的 referer 头，确定请求的来源，避免CSRF攻击
- token防范：在表单请求中添加 token，标识表单的合法性

## SQL注入攻击

> 通过把SQL命令插入到 web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。

- 泄漏企业数据
- 恶意修改网页数据
- 网站挂马

**注入方式**

- 通过登录界面进行sql注入

  ```sql
  select * from table where username='zhangsan' and uesrpass='abc' or (1=1 and username='zhangsan')
  ```

- 通过文章管理界面注入

## 文件上传漏洞

> 指用户通过利用 windows 文件命名规则，上传了可执行的脚本文件（php文件），并通过此脚本文件获得了执行服务器端命令的能力。

漏洞原因分析：

- window命名规则：不可以出现` \ / : * ? < > " |`
- move_uploaded_file（php的内置函数）函数：在移动文件会忽略非法字符以及之后的字符。

**文件上传漏洞的方式**

- 通过中间代理工具（如fiddler等）完成上传非法文件的目的。

**防范**

- 权限防御（设置服务器文件权限不可执行）
- 文件名防御（使用随机数改写文件名与文件路径）